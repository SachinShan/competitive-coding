<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      table,
      th,
      td {
        /* background-color: green; */
        border: 2px solid gray;
        border-collapse: collapse;
        padding: 10px;
        height: 10px;
        width: 30px;
      }
      .hero{
        width: 100%;
        display: flex;
        flex-flow: row wrap;
        background-color: aquamarine;
      }
      .left, .right{
        flex-basis: 48%;
        border: 2px solid blue;
        border-radius: 8px;
      }
      .left{
        padding: 1%;
        display: flex;
        flex-flow: column;
      }
      .right{
        overflow: scroll;
        height: 400px;
      }
    </style>
  </head>
  <body>
    <center>
    <div class="heading">
        <h1>Rat In the maze</h1>
    </div>
      <input type="text" name="takeInput" id="val" />
      <button type="button" onclick="initialize()">Click ME</button>

    <div class="hero">
        <div class="left" id="mazebox">
            <div id="change">
                
            </div>
            <div>
                <button
                    onclick="startMove()"
                    style="background-color: green; color: white"
                >
                    START
            </button>
            </div>
            
        </div>
        
        <div class="right" id="container"></div>
    </div>
    
    </center>





    
    <script type="text/javascript">
      var maze;

      var mazeobject = document.getElementById("mazebox");
      var ratshow = document.getElementById("container");
      var size = document.getElementById("val").value;
      maze = [];
      var smaze = [];

      // for (var i = 0; i < smaze.length; i++) {
      //   smaze[i] = [];
      // }

      function initialize() {
        var x = document.getElementById("val").value;

        var table = document.createElement("table");

        for (var i = 0; i < x; i++) {
          var tabler = document.createElement("tr");
          for (var j = 0; j < x; j++) {
            var tabled = document.createElement("td");
            var butt = document.createElement("button");
            var num = "col" + i + j;
            butt.setAttribute("id", num);
            butt.setAttribute("style", "width: 100%;");
            tabled.setAttribute("id", num);
            butt.setAttribute("onclick", "fun(this.id)");
            tabled.append(butt);

            tabler.append(tabled);
          }
          table.append(tabler);
        }
        mazeobject.append(table);
        for (var i = 0; i < x; i++) {
          for (var j = 0; j < x; j++) {
            var gcolor = "col" + i + j;
            document.getElementById(gcolor).style.backgroundColor = "green";
          }
        }
      }

      function fun(data) {
        var dat = data;
        document.getElementById(dat).style.backgroundColor = "red";
      }

      function startMove() {
        var n = document.getElementById("val").value;
        for (var k = 0; k < n; k++) {
          var m = document.getElementById("val").value;

          var arr1 = new Array(n);
          var arr2 = new Array(n);
          for (var l = 0; l < n; l++) {
            var checkCol = "col" + k + l;
            var rang = document.getElementById(checkCol).style.backgroundColor;

            if (rang == "green") {
              arr1[l] = parseInt(1);
            } else {
              arr1[l] = parseInt(0);
            }
            arr2[l] = 0;
          }
          smaze.push(arr2);
          maze.push(arr1);
        }

        // for (var m = 0; m < n; m++) {
        //   for (var q = 0; q < n; q++) {
        //     window.alert(maze[m][q]);
        //   }
        // }

        setTimeout(rat, 2000, 0, 0);
      }

      function safe(x, y) {
        var n = document.getElementById("val").value;
        if (x < n && y < n && maze[x][y] == 1) {
          return 1;
        } else {
          return 0;
        }
      }
      function rat(x, y) {
        var ratmove = document.createElement("div");
        var rattable = document.createElement("table");
        var n = document.getElementById("val").value;
        if (x == n - 1 && y == n - 1) {
          for (var i = 0; i < n; i++) {
            var ratrow = document.createElement("tr");
            for (var j = 0; j < n; j++) {
              var ratdata = document.createElement("td");
              if (i == x && j == y) {
                ratpos = document.createTextNode("rat");
                ratdata.append(ratpos);
              }
              ratrow.append(ratdata);
            }
            rattable.append(ratrow);
            ratmove.append(rattable);
            ratbreak = document.createElement("br");
            ratshow.append(ratbreak);
            ratshow.append(ratbreak);
            ratshow.append(ratbreak);
            ratshow.append(ratmove);
          }
          smaze[x][y] = 1;
          return 1;
        }

        var check = safe(x, y);
        if (check == 1) {
          for (var i = 0; i < n; i++) {
            var ratrow = document.createElement("tr");
            for (var j = 0; j < n; j++) {
              var ratdata = document.createElement("td");
              if (i == x && j == y) {
                ratpos = document.createTextNode("rat");
                ratdata.append(ratpos);
              }
              ratrow.append(ratdata);
            }
            rattable.append(ratrow);
            ratbreak = document.createElement("br");
            ratmove.append(rattable);
            ratshow.append(ratbreak);
            ratshow.append(ratbreak);
            ratshow.append(ratbreak);
            ratshow.append(ratmove);
            // drawline = document.createElement("hr");
            // ratshow.append(drawline);
          }

          smaze[x][y] = 1;
          var rec = setTimeout(rat, 3000, x + 1, y);
          if (rec == 1) {
            return 1;
          }
          var rec2 = setTimeout(rat, 3000, x, y + 1);
          if (rec2 == 1) {
            return 1;
          }

          smaze[x][y] = 0;
          return 0;
        } else {
          return 0;
        }
      }
    </script>
  </body>
</html>